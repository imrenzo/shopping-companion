{"version":3,"file":"index.html-C_59GyIU.js","sources":["../../src/pages/popup/Popup.tsx","../../src/pages/popup/index.tsx"],"sourcesContent":["import React, { useEffect,useState } from 'react';\r\nimport logo from '@assets/img/logo.svg';\r\nimport { processProduct } from '@src/scripts/geminiProcess';\r\n\r\ninterface outputProps {\r\n  productName: string;\r\n  score: number;\r\n  suggestedAlternative: string;\r\n}\r\n\r\nexport default function Popup() {\r\n  const [productData, setProductData] = useState<outputProps | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        // Ask content script for the product data\r\n        const product = await new Promise<{ title: string; price: string }>((resolve, reject) => {\r\n          chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\r\n            if (tabs[0]?.id === undefined) return reject(\"No active tab\");\r\n            chrome.tabs.sendMessage(tabs[0].id, { type: \"GET_PRODUCT_DATA\" }, (response) => {\r\n              if (chrome.runtime.lastError) {\r\n                return reject(chrome.runtime.lastError.message);\r\n              }\r\n              resolve(response);\r\n            });\r\n          });\r\n        });\r\n\r\n        // Call Gemini AI with the title\r\n        const result = await processProduct(product.title);\r\n        setProductData(result);\r\n      } catch (err: any) {\r\n        console.error(\"Error fetching product data:\", err);\r\n        setError(\"Failed to get product analysis.\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n\r\n  return (\r\n    <div className=\"absolute top-0 left-0 right-0 bottom-0 text-center h-full p-3 bg-gray-800\">\r\n      <header className=\"flex flex-col items-center justify-center text-white\">\r\n        <img src={logo} className=\"h-36 pointer-events-none animate-spin-slow\" alt=\"logo\" />\r\n        \r\n        {loading ? (\r\n          <p className=\"mt-4 text-gray-300\">Analyzing product...</p>\r\n        ) : error ? (\r\n          <p className=\"text-red-400\">{error}</p>\r\n        ) : productData ? (\r\n          <div className=\"mt-4 text-left text-white bg-gray-700 p-4 rounded shadow\">\r\n            <h2 className=\"text-xl font-bold mb-2\">AI Product Analysis</h2>\r\n            <p><strong>Product Name:</strong> {productData.productName}</p>\r\n            <p><strong>Score:</strong> {productData.score}</p>\r\n            <p><strong>Suggested Alternative:</strong> {productData.suggestedAlternative}</p>\r\n          </div>\r\n        ) : (\r\n          <p>No data available.</p>\r\n        )}\r\n      </header>\r\n    </div>\r\n  );\r\n}","import React from 'react';\r\nimport { createRoot } from 'react-dom/client';\r\nimport '@pages/popup/index.css';\r\nimport '@assets/styles/tailwind.css';\r\nimport Popup from '@pages/popup/Popup';\r\n\r\nfunction init() {\r\n  const rootContainer = document.querySelector(\"#__root\");\r\n  if (!rootContainer) throw new Error(\"Can't find Popup root element\");\r\n  const root = createRoot(rootContainer);\r\n  root.render(<Popup />);\r\n}\r\n\r\ninit();\r\n"],"names":["Popup","productData","setProductData","useState","loading","setLoading","error","setError","useEffect","product","resolve","reject","tabs","_a","response","result","processProduct","err","jsxs","jsx","logo","init","rootContainer","createRoot"],"mappings":"oOAUA,SAAwBA,GAAQ,CAC9B,KAAM,CAACC,EAAaC,CAAc,EAAIC,EAAAA,SAA6B,IAAI,EACjE,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAS,EAAE,EAErCK,OAAAA,EAAAA,UAAU,IAAM,EACI,SAAY,CACxB,GAAA,CAEF,MAAMC,EAAU,MAAM,IAAI,QAA0C,CAACC,EAASC,IAAW,CAChF,OAAA,KAAK,MAAM,CAAE,OAAQ,GAAM,cAAe,IAASC,GAAS,OACjE,KAAIC,EAAAD,EAAK,CAAC,IAAN,YAAAC,EAAS,MAAO,OAAW,OAAOF,EAAO,eAAe,EACrD,OAAA,KAAK,YAAYC,EAAK,CAAC,EAAE,GAAI,CAAE,KAAM,kBAAsB,EAACE,GAAa,CAC1E,GAAA,OAAO,QAAQ,UACjB,OAAOH,EAAO,OAAO,QAAQ,UAAU,OAAO,EAEhDD,EAAQI,CAAQ,CAAA,CACjB,CAAA,CACF,CAAA,CACF,EAGKC,EAAS,MAAMC,EAAeP,EAAQ,KAAK,EACjDP,EAAea,CAAM,QACdE,EAAU,CACT,QAAA,MAAM,+BAAgCA,CAAG,EACjDV,EAAS,iCAAiC,CAAA,QAC1C,CACAF,EAAW,EAAK,CAAA,CAEpB,GAEU,CACZ,EAAG,EAAE,QAIF,MAAI,CAAA,UAAU,4EACb,SAACa,EAAA,KAAA,SAAA,CAAO,UAAU,uDAChB,SAAA,CAAAC,MAAC,OAAI,IAAKC,EAAM,UAAU,6CAA6C,IAAI,OAAO,EAEjFhB,EACEe,EAAA,IAAA,IAAA,CAAE,UAAU,qBAAqB,SAAA,sBAAoB,CAAA,EACpDb,EACFa,EAAA,IAAC,IAAE,CAAA,UAAU,eAAgB,SAAMb,CAAA,CAAA,EACjCL,EACDiB,EAAA,KAAA,MAAA,CAAI,UAAU,2DACb,SAAA,CAACC,EAAA,IAAA,KAAA,CAAG,UAAU,yBAAyB,SAAmB,sBAAA,SACzD,IAAE,CAAA,SAAA,CAAAA,EAAAA,IAAC,UAAO,SAAa,eAAA,CAAA,EAAS,IAAElB,EAAY,WAAA,EAAY,SAC1D,IAAE,CAAA,SAAA,CAAAkB,EAAAA,IAAC,UAAO,SAAM,QAAA,CAAA,EAAS,IAAElB,EAAY,KAAA,EAAM,SAC7C,IAAE,CAAA,SAAA,CAAAkB,EAAAA,IAAC,UAAO,SAAsB,wBAAA,CAAA,EAAS,IAAElB,EAAY,oBAAA,CAAqB,CAAA,CAC/E,CAAA,CAAA,EAECkB,EAAA,IAAA,IAAA,CAAE,SAAkB,oBAAA,CAAA,CAAA,CAAA,CAEzB,CACF,CAAA,CAEJ,CC9DA,SAASE,GAAO,CACR,MAAAC,EAAgB,SAAS,cAAc,SAAS,EACtD,GAAI,CAACA,EAAqB,MAAA,IAAI,MAAM,+BAA+B,EACtDC,aAAWD,CAAa,EAChC,OAAQH,EAAAA,IAAAnB,EAAA,CAAM,CAAA,CAAE,CACvB,CAEAqB,EAAK"}