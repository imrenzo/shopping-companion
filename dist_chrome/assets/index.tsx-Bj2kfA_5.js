function u(e,n=5e3){return new Promise(t=>{const r=Date.now();function c(){const i=document.querySelector(e);if(i)return t(i);if(Date.now()-r>n)return t(null);requestAnimationFrame(c)}c()})}async function I(){var r,c,i,d,l,s,m,p,f,w,y,C,g,h,x,S,q,D,P,T,z;const e=window.location.hostname;let n="",t="";if(e.includes("amazon"))console.log("using amazon scraper"),n=((c=(r=document.getElementById("productTitle"))==null?void 0:r.textContent)==null?void 0:c.trim())||"",t=((d=(i=document.querySelector(".a-price .a-offscreen"))==null?void 0:i.textContent)==null?void 0:d.trim())||((s=(l=document.getElementById("priceblock_ourprice"))==null?void 0:l.textContent)==null?void 0:s.trim())||((p=(m=document.getElementById("priceblock_dealprice"))==null?void 0:m.textContent)==null?void 0:p.trim())||"";else if(e.includes("shopee")){console.log("using shopee scraper");const o=await u("h1.vR6K3w"),a=await u("div.IZPeQz.B67UQ0");n=((f=o==null?void 0:o.textContent)==null?void 0:f.trim())||"",t=((w=a==null?void 0:a.textContent)==null?void 0:w.trim())||""}else if(e.includes("lazada")){if(console.log("using lazada scraper"),n=((C=(y=document.querySelector(".pdp-mod-product-badge-title"))==null?void 0:y.textContent)==null?void 0:C.trim())||((h=(g=document.querySelector(".pdp-mod-product-badge-title-v2"))==null?void 0:g.textContent)==null?void 0:h.trim())||"",t=((S=(x=document.querySelector(".pdp-v2-product-price-content-salePrice-amount"))==null?void 0:x.textContent)==null?void 0:S.trim())||"",!t){const o=await u("span[data-spm-anchor-id]");t=((q=o==null?void 0:o.textContent)==null?void 0:q.trim())||""}t=t&&"$"+t}else n=((P=(D=document.querySelector("h1"))==null?void 0:D.textContent)==null?void 0:P.trim())||"",t=((z=(T=document.querySelector("[class*=price]"))==null?void 0:T.textContent)==null?void 0:z.trim())||"";return{title:n||"No product title found",price:t||"No price found"}}async function _(){const e=await I();({...e},chrome.runtime.sendMessage({type:"PRODUCT_DATA",payload:{...e}}))}let A=window.location.href;setInterval(()=>{window.location.href!==A&&(A=window.location.href,_())},1e3);_();chrome.runtime.onMessage.addListener((e,n,t)=>{if(e.type==="GET_PRODUCT_DATA")return I().then(r=>{t(r)}),!0});
//# sourceMappingURL=index.tsx-Bj2kfA_5.js.map
